"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[315],{16315:(xe,h,a)=>{a.r(h),a.d(h,{ProfileModule:()=>Me});var u=a(96814),g=a(52577),e=a(65879),k=a(6593),l=a(57252),f=a(15861),S=a(16676),p=a(60095);let D=(()=>{class o{constructor(n,t,s,i,c){this.paymentService=n,this.usersService=t,this.packagePricingService=s,this.coursesServices=i,this.router=c,this.stripe=Stripe(l.NZ.stripeAPI)}ngOnInit(){this.getUser(),this.initPaymentForm()}getUser(){this.usersService.userDoc.subscribe(n=>{this.user=n})}initPaymentForm(){this.elements=this.stripe.elements(),this.cardElement=this.elements.create("card"),this.cardElement.mount("#card-element")}createPaymentIntent(){var n=this;return(0,f.Z)(function*(){try{let t={amount:100*n.packagePricingService.getPackagePriceAndCurrency(n.user.country).price,userID:n.user.id,env:l.NZ.env,name:n.user.displayName,email:n.user.email,currency:n.packagePricingService.getPackagePriceAndCurrency(n.user.country).currency};const s=yield n.paymentService.createPaymentIntent(t),i=s.data.clientSecret;if(!i)return void console.error("Error: Failed to create payment intent");const{error:c}=yield n.stripe.confirmCardPayment(i,{payment_method:{card:n.cardElement}});if(c)console.error(c);else if(alert("Payment successful!"),s?.data?.envRealized&&s?.data?.paymentID){let Oe={env:s?.data?.envRealized,paymentID:s?.data?.paymentID},v=yield n.checkPayment(Oe);v?.status&&"Payment Succeeded"===v?.message&&n.updateUserStatus()}}catch(t){console.error("Error:",t)}})()}checkPayment(n){var t=this;return(0,f.Z)(function*(){return yield t.paymentService.checkPayment(n)})()}updateUserStatus(){var n=this;return(0,f.Z)(function*(){const t=yield n.getFirstCourseID();n.user.paid=!0,n.user.sessionExpirationDate=S().add(6,"M").toDate(),n.user.courseList.push({courseId:t.id,chapterLevel:[],finished:null}),yield n.usersService.updateUserDoc(n.user).then(i=>{window.location.reload()}).catch(i=>{console.log("user err",i)})})()}getFirstCourseID(){var n=this;return(0,f.Z)(function*(){return new Promise((t,s)=>{n.coursesServices.getFirstCourse().subscribe({next:i=>{t(i)},error:()=>{s(!1)}})})})()}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(l.te),e.Y36(l.fz),e.Y36(l.z9),e.Y36(l.No),e.Y36(g.F0))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-subscription-details"]],decls:13,vars:0,consts:[[1,"pckDetails"],[1,"pckContiner"],[1,"row"],[1,"col-12","col-sm-12","col-md-8","col-lg-8"],["id","payment-form"],["id","card-element",1,"StripeElement"],["type","button",3,"click"],[1,"col-12","col-sm-12","col-md-4","col-lg-4"],[1,"selectedPck"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e._UZ(5,"div",5)(6,"br")(7,"br")(8,"br"),e.TgZ(9,"button",6),e.NdJ("click",function(){return s.createPaymentIntent()}),e._uU(10,"Subscribe Now"),e.qZA()()(),e.TgZ(11,"div",7),e._UZ(12,"div",8),e.qZA()()()())},dependencies:[p._Y,p.JL,p.F]})}return o})();var P=function(o){return o.EGP="EGP",o.USD="USD",o}(P||{});let Z=(()=>{class o{constructor(n,t){this.auth=n,this.packagePricingService=t,this.currency=P.EGP,this.price=0}ngOnInit(){this.getPackagePrice()}getPackagePrice(){if(this.user){const n=this.packagePricingService.getPackagePriceAndCurrency(this.user.country);this.price=n.price,this.currency=n.currency}}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(l.e8),e.Y36(l.z9))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-payment-reminder"]],inputs:{user:"user"},decls:34,vars:2,consts:[[1,"paymentReminder","row"],[1,"col-12","col-sm-12","col-md-6","col-lg-4"],[1,"packageDetails"],[1,"subscribe","d-flex","flex-column","align-items-center"],[1,"d-flex","flex-column","flex-lg-row","justify-content-between","offer"],[1,"offer-card","dark-bg","align-self-end","d-flex","flex-column","align-items-center"],["id","plan-name"],["id","plan-price"],[1,"available"],[1,"strick"],[1,"col-12","col-sm-12","col-md-6","col-lg-8"],[1,"payment"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"section",3)(4,"div",4)(5,"div",5)(6,"p",6),e._uU(7,"Advanced"),e.qZA(),e.TgZ(8,"p",7),e._uU(9),e.TgZ(10,"small"),e._uU(11),e.qZA()(),e.TgZ(12,"ul")(13,"li",8),e._uU(14,"Attendance Management"),e.qZA(),e.TgZ(15,"li",8),e._uU(16,"Leave System Management"),e.qZA(),e.TgZ(17,"li",8),e._uU(18,"Employee Management"),e.qZA(),e.TgZ(19,"li",8),e._uU(20,"Chat Support"),e.qZA(),e.TgZ(21,"li",8),e._uU(22,"Expense Tracking"),e.qZA(),e.TgZ(23,"li",8),e._uU(24,"Invoice Generate"),e.qZA(),e.TgZ(25,"li",8),e._uU(26,"Purchase Generate"),e.qZA(),e.TgZ(27,"li",9),e._uU(28,"Payroll"),e.qZA(),e.TgZ(29,"li",9),e._uU(30,"App Management"),e.qZA()()()()()()(),e.TgZ(31,"div",10)(32,"div",11),e._UZ(33,"app-subscription-details"),e.qZA()()()),2&t&&(e.xp6(9),e.hij("",s.price," "),e.xp6(2),e.Oqu(s.currency))},dependencies:[D],styles:['.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]{width:100%;margin-top:10px;min-height:70vh}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#034f75}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-20px;height:auto}@media (max-width: 400px){.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px;color:#2071a5}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){font-weight:300}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-weight:600}@media (max-width: 500px){.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:25px}}@media (max-width: 401px){.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]{gap:25px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]{width:350px;border:1px solid #2071a5;border-radius:10px;margin-bottom:50px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   #plan-name[_ngcontent-%COMP%]{padding:5px;text-align:center;width:200px;border:1px solid #2071a5;border-radius:10px;color:#2071a5;margin-top:10px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   #plan-price[_ngcontent-%COMP%]{color:#2071a5;font-size:36px;font-weight:700}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   #plan-price[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:20px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#81a7ba}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{--icon-space: 1.5em;list-style:none;padding:0}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:10px 0;padding-left:var(--icon-space);font-weight:400}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\f058";font-family:FontAwesome;display:inline-block;margin-left:calc(var(--icon-space) * -1);width:var(--icon-space)}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%]{color:#2071a5}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%]:before{color:#07b524}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .strick[_ngcontent-%COMP%]{color:#81a7ba;text-decoration:line-through}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .strick[_ngcontent-%COMP%]:before{content:"\\f057";color:#81a7ba}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin:25px;padding:20px 75px;border-radius:10px;font-size:20px;background-color:#a9d9f7;border:1px solid #a9d9f7;color:#2071a5}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]{width:350px;background-color:#2071a5;border:1px solid #2071a5;border-radius:10px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   #plan-name[_ngcontent-%COMP%]{padding:5px;text-align:center;width:200px;border:1px solid white;border-radius:10px;color:#fff;margin-top:10px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   #plan-price[_ngcontent-%COMP%]{color:#fff;font-size:36px;font-weight:700}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   #plan-price[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:20px}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#fff}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .strick[_ngcontent-%COMP%]{color:#81a7ba}.paymentReminder[_ngcontent-%COMP%]   .packageDetails[_ngcontent-%COMP%]   .subscribe[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #2071a5}']})}return o})();function T(o,r){1&o&&e._UZ(0,"i",16)}const A=function(o){return{active:o}};function w(o,r){if(1&o&&(e.TgZ(0,"div",12)(1,"div",13)(2,"p"),e._uU(3),e.ALo(4,"date"),e.qZA()(),e.TgZ(5,"div",14),e.YNc(6,T,1,0,"i",15),e.qZA()()),2&o){const n=r.$implicit,t=e.oxw();e.xp6(3),e.Oqu(e.xi3(4,3,n,"E")),e.xp6(2),e.Q6J("ngClass",e.VKq(6,A,t.activeDays.includes(n))),e.xp6(1),e.Q6J("ngIf",t.activeDays.includes(n))}}let j=(()=>{class o{constructor(){this.week=[]}convertTimestampToJSDateObj(n){let t=n.toDate();return t=new Date(t.setDate(t.getDate())),t.toISOString().slice(0,10)}ngOnInit(){let n=new Date;for(let t=0;t<7;t++){let s=n.getDate()-n.getDay()+t,i=new Date(n.setDate(s)).toISOString().slice(0,10);this.week.push(i)}this.activeDays=this.streakDays.map(t=>this.convertTimestampToJSDateObj(t))}static#e=this.\u0275fac=function(t){return new(t||o)};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-streak"]],inputs:{streakDays:"streakDays",currentStreak:"currentStreak",maxStreak:"maxStreak"},decls:21,vars:3,consts:[[1,"container-md","d-flex","justify-content-center","profile-streak"],[1,"profile-streak-card","d-flex","flex-column","flex-lg-row"],[1,"streak-days","d-flex","flex-column"],[1,"d-flex","calendar","align-self-center"],[1,"d-flex","days"],["class","d-flex flex-column justify-content-around align-items-center calender-days",4,"ngFor","ngForOf"],[1,"divider"],[1,"line"],[1,"d-flex","justify-content-center","align-self-center","streak-info"],[1,"d-flex","flex-column","justify-content-around","align-items-center"],[1,"title"],[1,"data"],[1,"d-flex","flex-column","justify-content-around","align-items-center","calender-days"],[1,"week-days"],[1,"week-dates",3,"ngClass"],["class","fa-solid fa-check",4,"ngIf"],[1,"fa-solid","fa-check"]],template:function(t,s){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Streak"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4),e.YNc(7,w,7,8,"div",5),e.qZA()()(),e.TgZ(8,"div",6),e._UZ(9,"div",7),e.qZA(),e.TgZ(10,"div",8)(11,"div",9)(12,"p",10),e._uU(13,"Current Streak"),e.qZA(),e.TgZ(14,"p",11),e._uU(15),e.qZA()(),e.TgZ(16,"div",9)(17,"p",10),e._uU(18,"Max Streak"),e.qZA(),e.TgZ(19,"p",11),e._uU(20),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",s.week),e.xp6(8),e.Oqu(s.currentStreak),e.xp6(5),e.Oqu(s.maxStreak))},dependencies:[u.mk,u.sg,u.O5,u.uU],styles:[".profile-streak[_ngcontent-%COMP%]{margin-top:25px}.profile-streak-card[_ngcontent-%COMP%]{gap:15px;width:100%;background-color:#e7e8e9;border-radius:12px;margin:15px;padding:20px}.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]{width:50%}@media (max-width: 992px){.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]{width:100%}}.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2ea2eb}.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{gap:15px;color:#9ba2a6;font-weight:400}@media (max-width: 576px){.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 420px){.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{gap:5px}}.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .calender-days[_ngcontent-%COMP%]   .week-dates[_ngcontent-%COMP%]{position:relative;padding:20px;border-radius:50%;border:2px solid #52b2ee}.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .calender-days[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#52b2ee}.profile-streak-card[_ngcontent-%COMP%]   .streak-days[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .calender-days[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:30%;left:30%;color:#fff;font-size:20px}.profile-streak-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:inherit;width:2px}.profile-streak-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:100%;width:2px;background-color:#d6d6dd}@media (max-width: 992px){.profile-streak-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:inherit;height:3px}.profile-streak-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:2px;width:100%}}.profile-streak-card[_ngcontent-%COMP%]   .streak-info[_ngcontent-%COMP%]{width:50%;gap:30%}@media (max-width: 992px){.profile-streak-card[_ngcontent-%COMP%]   .streak-info[_ngcontent-%COMP%]{width:100%;gap:20%}}.profile-streak-card[_ngcontent-%COMP%]   .streak-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;color:#86c9f3;font-weight:300}.profile-streak-card[_ngcontent-%COMP%]   .streak-info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{font-size:48px;font-weight:600;color:#52b2ee}"]})}return o})();var b=a(197),M=a(61654),O=a(3910),U=a(99397),I=a(94664);function q(o,r){1&o&&(e.TgZ(0,"p",8),e._uU(1,"In Progress"),e.qZA())}function R(o,r){1&o&&e._UZ(0,"i",9)}function L(o,r){1&o&&e._UZ(0,"i",10)}let F=(()=>{class o{constructor(n,t,s,i){this.router=n,this.route=t,this.learnService=s,this.usersService=i,this.enrolling=new e.vpe,this.isLoading=!1,this.isCourseActive=!1,this.isCourseInProgress=!1,this.isCourseFinished=!1,this.isCourseEnrolled=!1,this.showSnackbar=(0,O.O)()}getFirstChapterAndLecture(){this.learnService.getNextChapterID(this.course.id,1).pipe((0,U.b)(n=>{this.nextChapterID=n}),(0,I.w)(n=>this.learnService.getFirstLectureIDOfChapter(this.course.id,n))).subscribe(n=>{this.firstLectureID=n[0]})}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("uid");const n=this.userCourseList.find(t=>t.courseId===this.course.id);n&&!n.finished?(this.isCourseActive=!0,this.isCourseInProgress=!0,this.isCourseEnrolled=!0):n&&n.finished&&(this.isCourseActive=!0,this.isCourseFinished=!0,this.isCourseEnrolled=!0),0===n?.chapterLevel.length&&(this.isCourseEnrolled=!1,this.getFirstChapterAndLecture())}navigateToLearn(){var n=this;return(0,f.Z)(function*(){try{n.isCourseEnrolled&&(n.isLoading=!0,n.enrolling.emit(!0),n.userCourseList.find(t=>t.courseId===n.course.id).chapterLevel.push({chapterId:n.nextChapterID,finished:null,lectureLevel:[]}),console.log(n.userCourseList.find(t=>t.courseId===n.course.id)),n.userCourseList.find(t=>t.courseId===n.course.id).chapterLevel.find(t=>t.chapterId===n.nextChapterID).lectureLevel.push({lectureId:n.firstLectureID,finished:null}),console.log(n.userCourseList),yield n.usersService.addCourseLevelToUserDoc(n.userId,n.userCourseList)),console.log(n.userCourseList),n.enrolling.emit(!1),n.isLoading=!1,n.router.navigate(["learn/course",n.course.id])}catch{n.enrolling.emit(!1),n.isLoading=!1,n.showSnackbar("Something went wrong! Please, try again.","fail-snackbar")}})()}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(l.Ef),e.Y36(l.fz))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-course-card"]],inputs:{course:"course",userCourseList:"userCourseList"},outputs:{enrolling:"enrolling"},decls:9,vars:5,consts:[[1,"courses"],[1,"container-fluid","d-flex","align-items-center","course-card",3,"disabled","click"],["src","../../../../../assets/images/courseIcon.svg","alt",""],[1,"d-flex","flex-column","justify-content-around","course"],[1,"course-title"],["class","course-status",4,"ngIf"],["class","fa-solid fa-check finished-course","style","margin-left: auto; margin-right: 15px",4,"ngIf"],["class","fa-solid fa-lock align-self-center locked-course","style","margin-left: auto; margin-right: 15px",4,"ngIf"],[1,"course-status"],[1,"fa-solid","fa-check","finished-course",2,"margin-left","auto","margin-right","15px"],[1,"fa-solid","fa-lock","align-self-center","locked-course",2,"margin-left","auto","margin-right","15px"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return s.navigateToLearn()}),e._UZ(2,"img",2),e.TgZ(3,"div",3)(4,"p",4),e._uU(5),e.qZA()(),e.YNc(6,q,2,0,"p",5),e.YNc(7,R,1,0,"i",6),e.YNc(8,L,1,0,"i",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("disabled",s.isCourseActive||s.isLoading),e.xp6(4),e.Oqu(s.course.title),e.xp6(1),e.Q6J("ngIf",s.isCourseInProgress),e.xp6(1),e.Q6J("ngIf",s.isCourseFinished),e.xp6(1),e.Q6J("ngIf",!s.isCourseActive))},dependencies:[u.O5],styles:[".courses[_ngcontent-%COMP%]{margin:10px 0 15px}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]{margin:10px 0;padding:10px;background-color:#fff;border-radius:12px;border:none}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]:hover{background-color:#ccdbf8}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]:disabled{background-color:#f1f1f1}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{margin-left:20px;padding:0}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .course-title[_ngcontent-%COMP%]{margin:0!important;font-size:20px;font-weight:600;color:#2ea2eb}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .course-status[_ngcontent-%COMP%]{color:#9ba2a6;font-weight:400;margin-top:18px;margin-left:auto}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .locked-course[_ngcontent-%COMP%]{font-size:25px}.courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .finished-course[_ngcontent-%COMP%]{color:#0f0;font-size:25px}"]})}return o})();const Y=["container"],J=["loadingSpinner"];function N(o,r){1&o&&(e.TgZ(0,"p",9),e._uU(1," You don't have any ongoing courses, yet. Start your learning jouney, "),e.TgZ(2,"span")(3,"a",10),e._uU(4,"NOW"),e.qZA()(),e._uU(5,"! "),e.qZA())}function Q(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"app-course-card",12),e.NdJ("enrolling",function(s){e.CHM(n);const i=e.oxw(2);return e.KtG(i.enrollingUser(s))}),e.qZA()}if(2&o){const n=r.$implicit,t=e.oxw(2);e.Q6J("course",n)("userCourseList",t.userDoc.courseList)}}function z(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Q,1,2,"app-course-card",11),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.courses)}}let H=(()=>{class o{constructor(n,t){this.router=n,this.route=t,this.loadingAnimation=(0,b.g)()}ngOnInit(){this.courses=this.route.snapshot.data.courses}navToLearn(){this.router.navigate(["/courses"])}enrollingUser(n){n?this.loadingAnimation("block",.8,this.loadingSpinner,this.container):this.loadingAnimation("none",1,this.loadingSpinner,this.container)}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(g.gz))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-courses"]],viewQuery:function(t,s){if(1&t&&(e.Gf(Y,5),e.Gf(J,5)),2&t){let i;e.iGM(i=e.CRH())&&(s.container=i.first),e.iGM(i=e.CRH())&&(s.loadingSpinner=i.first)}},inputs:{userDoc:"userDoc"},decls:13,vars:2,consts:[[1,"container-md","d-flex","justify-content-center","user-courses"],["container",""],[2,"position","absolute","top","calc(50% - 40px)","left","calc(50% - 40px)","display","none"],["loadingSpinner",""],[1,"user-courses-card",2,"opacity","inherit"],[1,"d-flex","justify-content-between","align-items-baseline","user-courses-card-header"],["type","button",1,"btn","primary-btn",3,"click"],["class","unpaid-user-message",4,"ngIf"],[4,"ngIf"],[1,"unpaid-user-message"],["routerLink","/subscribe/pay"],[3,"course","userCourseList","enrolling",4,"ngFor","ngForOf"],[3,"course","userCourseList","enrolling"]],template:function(t,s){1&t&&(e.TgZ(0,"section",0,1)(2,"div",2,3),e._UZ(4,"app-loading-spinner"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"h4"),e._uU(8,"Courses in Progress"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return s.navToLearn()}),e._uU(10," Browse Courses "),e.qZA()(),e.YNc(11,N,6,0,"p",7),e.YNc(12,z,2,1,"div",8),e.qZA()()),2&t&&(e.xp6(11),e.Q6J("ngIf",!s.userDoc.paid),e.xp6(1),e.Q6J("ngIf",s.userDoc.paid))},dependencies:[u.sg,u.O5,g.rH,M.g,F],styles:[".user-courses[_ngcontent-%COMP%]{position:relative;margin-top:25px;width:100%}.user-courses-card[_ngcontent-%COMP%]{width:100%;background-color:#e7e8e9;border-radius:12px;margin:15px;padding:20px}.user-courses-card[_ngcontent-%COMP%]   .unpaid-user-message[_ngcontent-%COMP%]{text-align:center;font-weight:600;padding:15px;margin:10px;border-radius:12px;background-color:#fff}.user-courses-card[_ngcontent-%COMP%]   .unpaid-user-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#52b2ee}.user-courses-card[_ngcontent-%COMP%]   .unpaid-user-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.user-courses-card[_ngcontent-%COMP%]   .unpaid-user-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .user-courses-card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2ea2eb}.user-courses-card-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#86c9f3;margin-left:auto;cursor:pointer}.user-courses-card[_ngcontent-%COMP%]   .browse-button[_ngcontent-%COMP%]{border:none;background-color:#52b2ee;color:#fff;padding:16px 25px;border-radius:12px}.primary-btn[_ngcontent-%COMP%]{padding:10px 18px;margin:10px 0;border-radius:12px;border:none;cursor:pointer;background-color:#52b2ee;color:#fff}"]})}return o})();var _=a(69930);function E(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Must Finish Related Course"),e.qZA())}function G(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Book"),e.qZA())}function $(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Oqu(n.sessionDisabledReason)}}function B(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Cancel Session"),e.qZA())}function X(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Pending"),e.qZA())}var C=function(o){return o.notHaveMentor="Not Have Mentor",o.completed="Completed",o}(C||{});let K=(()=>{class o{constructor(n,t,s,i){this.sessionService=n,this.auth=t,this.mentorService=s,this.activateRoute=i,this.day=new Date,this.progressiveCheckAccessability=!0,this.sessionDisabled=!1,this.userCanCancelSession=!1,this.sessionPending=!1,this.sessionDisabledReason=""}ngOnInit(){var n=this;return(0,f.Z)(function*(){n.getDataFromResolver(),n.auth.user.subscribe(t=>n.user=t),n.mentor=yield n.getSessionMentor(n.session.day),n.getUserTimeZone(),n.getTimeAndDate(n.session.time,n.dayNumber-1),n.checkSessionAvailability(n.session)})()}getDataFromResolver(){this.activateRoute.data.subscribe(n=>{this.userCollection=n.userData})}getTimeAndDate(n,t){console.log(1),this.day=new Date,this.day.setDate(this.day.getDate()+(t+(7-this.day.getDay()))%7);let s=this.convertTime(n,this.mentor?.timeZone||"Africa/Cairo",this.userTimeZone);return this.day.setHours(+s.split(":")[0]),this.day.setMinutes(+s.split(":")[1]),this.day.setSeconds(0),this.day.getDate()===(new Date).getDate()&&this.day.setDate(this.day.getDate()+7),this.day}bookSession(n){var t=this;return(0,f.Z)(function*(){console.log("this.day",n);const s={};s.mentorId=t.mentor.id,s.sessionDate=`${t.day.getMonth()+1}-${t.day.getDate()}-${t.day.getFullYear()}`,s.sessionDuration=n.duration,s.sessionId=n.id,s.sessionStatus="pending",s.sessionTime=n.time,s.sessionType=n.title,s.userId=t.user.uid,s.sessionDay=t.session.day,console.log(s),t.sessionService.bookSession(s).then(i=>{console.log("added session success",i),alert("success book"),t.sessionDisabled=!0;const c=t.checkCanICancelSession();console.log(c),c?(t.userCanCancelSession=!0,t.sessionDisabled=!1,t.sessionPending=!1):(t.userCanCancelSession=!1,t.sessionPending=!0,t.sessionDisabled=!0)}).catch(i=>{console.log("err")})})()}getSessionMentor(n){return new Promise((t,s)=>{this.mentorService.getMenorBySessionID(n).subscribe(i=>{t(i[0])})})}convertTime(n,t,s){return _.tz(n,"HH:mm",t).clone().tz(s).format("HH:mm")}getUserTimeZone(){this.userTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,console.log("User Time Zone:",this.userTimeZone)}checkSessionAvailability(n){let t=!1;if("onboarding"===n.id&&(t=!0),this.progressiveCheckAccessability=!0,t){if(console.log("skip",n.id),!this.mentor?.id)return this.sessionDisabled=!0,void(this.sessionDisabledReason=C.notHaveMentor);{const s=`${this.day.getMonth()+1}-${this.day.getDate()}-${this.day.getFullYear()}`;console.log("date",s),console.log(this.mentor.freeDay),this.mentorService.getAllStudentReservedSession(this.mentor.freeDay,s).subscribe(i=>{if(console.log("studnet reserved session",i),i?.length>0){let c=i.findIndex(d=>d.userId===this.user.uid);if(console.log(c),c>=0){this.sessionDisabled=!0;const d=this.checkCanICancelSession();return console.log(d),d?(this.userCanCancelSession=!0,this.sessionDisabled=!1):(this.userCanCancelSession=!1,this.sessionPending=!0),void console.log(this.userCanCancelSession)}this.sessionDisabled=!0,this.sessionDisabledReason=C.completed}else this.sessionDisabled=!1})}}else if(this.progressiveCheckAccessability=this.checkUserProgress(n),this.progressiveCheckAccessability){if(!this.mentor?.id)return this.sessionDisabled=!0,void(this.sessionDisabledReason=C.notHaveMentor);{const s=`${this.day.getMonth()+1}-${this.day.getDate()}-${this.day.getFullYear()}`;this.mentorService.getAllStudentReservedSession(this.mentor.freeDay,s).subscribe(i=>{console.log("studnet reserved session",i);let c=i.findIndex(d=>d.userId===this.user.uid);if(console.log(c),c>=0){this.sessionDisabled=!0;const d=this.checkCanICancelSession();return console.log(d),d?(this.userCanCancelSession=!0,this.sessionDisabled=!1):(this.userCanCancelSession=!1,this.sessionPending=!0),void console.log(this.userCanCancelSession)}if(i.length>=10)return this.sessionDisabled=!0,void(this.sessionDisabledReason=C.completed)})}}else this.sessionDisabled=!0}checkUserProgress(n){return 1===this.userCollection.courseList.length?"html"===n.id&&null!==this.userCollection.courseList[0].finished:2===this.userCollection.courseList.length?"html"===n.id&&null!==this.userCollection.courseList[0].finished||"css"===n.id&&null!==this.userCollection.courseList[1].finished:3===this.userCollection.courseList.length&&("html"===n.id&&null!==this.userCollection.courseList[0].finished||"css"===n.id&&null!==this.userCollection.courseList[1].finished||"js"===n.id&&null!==this.userCollection.courseList[2].finished)}cancelSession(n){const t=`${this.day.getMonth()+1}-${this.day.getDate()}-${this.day.getFullYear()}`;this.sessionService.cancelSession(this.user.uid,this.mentor.id,t).then(s=>{console.log("cancel",s),this.sessionDisabled=!1,this.userCanCancelSession=!1,alert("session deleted")}).catch(s=>{alert("an error"),console.log("err",s)})}checkSession(n){this.sessionDisabled||this.userCanCancelSession?this.userCanCancelSession&&this.cancelSession(n):this.bookSession(n)}checkCanICancelSession(){const n=_();return!!_(this.day).subtract(24,"hours").isAfter(n)}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(l.mj),e.Y36(l.e8),e.Y36(l.Ny),e.Y36(g.gz))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-session-card"]],inputs:{session:"session",dayNumber:"dayNumber"},decls:18,vars:21,consts:[[1,"sessions-card","available"],[1,"bottomSection"],[1,"btn",3,"disabled","click"],[4,"ngIf"],["onerror","src='../../../../../../assets/images/placeholder-avatar.svg'","alt","mentor image",3,"src","title"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h5"),e._uU(2),e.qZA(),e.TgZ(3,"h6"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"div",1)(11,"button",2),e.NdJ("click",function(){return s.checkSession(s.session)}),e.YNc(12,E,2,0,"span",3),e.YNc(13,G,2,0,"span",3),e.YNc(14,$,2,1,"span",3),e.YNc(15,B,2,0,"span",3),e.YNc(16,X,2,0,"span",3),e.qZA(),e._UZ(17,"img",4),e.qZA()()),2&t&&(e.ekj("notAlailable",s.sessionDisabled),e.xp6(2),e.Oqu(s.session.title),e.xp6(2),e.Oqu(s.session.day),e.xp6(2),e.hij(" ",e.xi3(7,18,s.day,"M/d/yy, h:mm")," "),e.xp6(3),e.hij("",s.session.duration," Minutes"),e.xp6(2),e.ekj("book-button",s.progressiveCheckAccessability&&!s.sessionDisabled&&!s.userCanCancelSession)("btn-danger",s.progressiveCheckAccessability&&s.userCanCancelSession&&!s.sessionDisabled),e.Q6J("disabled",!s.progressiveCheckAccessability||s.sessionDisabled),e.xp6(1),e.Q6J("ngIf",!s.progressiveCheckAccessability),e.xp6(1),e.Q6J("ngIf",s.progressiveCheckAccessability&&!s.sessionDisabled&&!s.userCanCancelSession),e.xp6(1),e.Q6J("ngIf",s.progressiveCheckAccessability&&s.sessionDisabled&&!s.userCanCancelSession),e.xp6(1),e.Q6J("ngIf",s.progressiveCheckAccessability&&!s.sessionDisabled&&s.userCanCancelSession),e.xp6(1),e.Q6J("ngIf",s.progressiveCheckAccessability&&s.sessionDisabled&&!s.userCanCancelSession&&s.sessionPending),e.xp6(1),e.Q6J("src",null==s.mentor?null:s.mentor.profilePicture,e.LSH)("title",null==s.mentor?null:s.mentor.name))},dependencies:[u.O5,u.uU],styles:["p[_ngcontent-%COMP%]{margin-bottom:0}.sessions-card[_ngcontent-%COMP%]{padding:15px;margin-top:10px;background-color:#fff;border-radius:12px;min-width:150px}.sessions-card[_ngcontent-%COMP%]   .bottomSection[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.sessions-card[_ngcontent-%COMP%]   .bottomSection[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 5px;flex-grow:1}.sessions-card[_ngcontent-%COMP%]   .bottomSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;border-radius:100%}.sessions-card[_ngcontent-%COMP%]   .book-button[_ngcontent-%COMP%]{padding:10px 18px;margin:10px 0;border-radius:12px;border:none;cursor:pointer;flex-grow:1}.available[_ngcontent-%COMP%]{border:2px solid #52b2ee}.available[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#52b2ee}.available[_ngcontent-%COMP%]   .book-button[_ngcontent-%COMP%]{background-color:#52b2ee;color:#fff}.notAlailable[_ngcontent-%COMP%]{border:2px solid #ccc!important;background:#ccc!important}.unavailable[_ngcontent-%COMP%]{border:2px solid #9ea2a5}.unavailable[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#9ea2a5}.unavailable[_ngcontent-%COMP%]   .book-button[_ngcontent-%COMP%]{background-color:#9ea2a5;color:#fff}.disabledButton[_ngcontent-%COMP%]{background-color:#9ea2a5!important;cursor:not-allowed!important}"]})}return o})();function W(o,r){if(1&o&&(e.TgZ(0,"div",4),e._UZ(1,"app-session-card",5),e.qZA()),2&o){const n=r.$implicit,t=r.index;e.xp6(1),e.Q6J("session",n)("dayNumber",t)}}let V=(()=>{class o{constructor(n){this.sessionService=n,this.sessions=[]}ngOnInit(){this.sessionService.getAllSessions().subscribe(n=>this.sessions=n)}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(l.mj))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-sessions"]],decls:6,vars:1,consts:[[1,"container-md","sessions"],[1,"continer","sessions-card"],[1,"row"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[3,"session","dayNumber"]],template:function(t,s){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h4"),e._uU(3,"Sessions"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,W,2,2,"div",3),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",s.sessions))},dependencies:[u.sg,K],styles:[".sessions[_ngcontent-%COMP%]{margin-top:25px;text-align:center}.sessions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:start;color:#2ea2eb}.sessions-card[_ngcontent-%COMP%]{margin:15px;padding:20px;border-radius:12px;background-color:#e7e8e9;gap:15px}"]})}return o})();var m=a(17700);const ee=["loadingSpinner"],ne=["form"];let te=(()=>{class o{constructor(n,t,s){this.data=n,this.usersService=t,this.matDialogRef=s,this.isLoading=!1,this.loadingAnimation=(0,b.g)(),this.showSnackbar=(0,O.O)()}submitProject(n){var t=this;return(0,f.Z)(function*(){t.isLoading=!0,t.loadingAnimation("block",.8,t.loadindSpinner,t.form);try{const{projectTitle:s,projectDescription:i,projectRepo:c}=n.value,d={projectTitle:s,projectDescription:i,projectRepo:c};yield t.usersService.submitProject(t.data.userID,d),t.isLoading=!1,t.loadingAnimation("none",1,t.loadindSpinner,t.form),t.matDialogRef.close(),t.showSnackbar("Project has been submitted Successfully","success-snackbar")}catch{t.isLoading=!1,t.loadingAnimation("none",1,t.loadindSpinner,t.form),t.matDialogRef.close(),t.showSnackbar("Something went wrong! Please, try again later","success-snackbar")}})()}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(m.WI),e.Y36(l.fz),e.Y36(m.so))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-submit-project-dialog"]],viewQuery:function(t,s){if(1&t&&(e.Gf(ee,5),e.Gf(ne,5)),2&t){let i;e.iGM(i=e.CRH())&&(s.loadindSpinner=i.first),e.iGM(i=e.CRH())&&(s.form=i.first)}},decls:26,vars:7,consts:[[2,"position","relative"],["form",""],[2,"position","absolute","top","calc(50% - 40px)","left","calc(50% - 40px)","display","none"],["loadingSpinner",""],[1,"d-flex","flex-row-reverse"],["type","button","mat-dialog-close","",1,"exit-button",3,"disabled"],[1,"fa-regular","fa-circle-xmark"],["mat-dialog-title","",3,"align"],[3,"ngSubmit"],["projectForm","ngForm"],[1,"form-group"],["type","text","ngModel","","name","projectTitle","id","title","placeholder","Project Title","required","",1,"form-control",3,"disabled"],["type","text","ngModel","","name","projectDescription","id","escription","placeholder","Project Description","required","","maxlength","120",1,"form-control",3,"disabled"],["description",""],[2,"text-align","end","padding","5px 15px"],[1,"form-text","text-muted"],["type","text","ngModel","","name","projectRepo","id","repo","placeholder","Repo link (e.g. github.com/username/repo-name)","required","",1,"form-control",2,"margin-top","5px",3,"disabled"],["align","center"],["type","submit",1,"submit-button",3,"disabled"]],template:function(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div",0,1)(2,"div",2,3),e._UZ(4,"app-loading-spinner"),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e._UZ(7,"i",6),e.qZA()(),e.TgZ(8,"h2",7),e._uU(9,"Submit Project"),e.qZA(),e.TgZ(10,"mat-dialog-content")(11,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(i);const d=e.MAs(12);return e.KtG(s.submitProject(d))}),e.TgZ(13,"div",10),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",10),e._UZ(16,"textarea",12,13),e.TgZ(18,"div",14)(19,"small",15),e._uU(20),e.qZA()()(),e.TgZ(21,"div",10),e._UZ(22,"input",16),e.qZA(),e.TgZ(23,"mat-dialog-actions",17)(24,"button",18),e._uU(25," Submit "),e.qZA()()()()()}if(2&t){const i=e.MAs(12),c=e.MAs(17);e.xp6(6),e.Q6J("disabled",s.isLoading),e.xp6(2),e.Q6J("align","center"),e.xp6(6),e.Q6J("disabled",s.isLoading),e.xp6(2),e.Q6J("disabled",s.isLoading),e.xp6(4),e.hij(" ",c.value.length," / 120"),e.xp6(2),e.Q6J("disabled",s.isLoading),e.xp6(2),e.Q6J("disabled",i.invalid||s.isLoading)}},dependencies:[M.g,m.ZT,m.uh,m.xY,m.H8,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.nD,p.On,p.F],styles:[".exit-button[_ngcontent-%COMP%]{border:none;background-color:transparent;padding:0;margin-top:10px;margin-right:10px}.exit-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:gray}input[_ngcontent-%COMP%]{margin:15px}textarea[_ngcontent-%COMP%]{height:100px;resize:none;margin:0 15px}.submit-button[_ngcontent-%COMP%]{border:none;color:#fff;background-color:#0096cb;padding:8px 20px;margin:0;border-radius:12px}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.45}"]})}return o})();function se(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.onSubmitProject())}),e._uU(1," Submit a project "),e.qZA()}}function oe(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1," You haven't submitted any projects yet. Complete your courses to unlock our tailored projects, or showcase your personal projects to the world! "),e.qZA())}function ie(o,r){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",n.userName," haven't submitted any projects, yet. ")}}function re(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){const i=e.CHM(n).$implicit,c=e.oxw(2);return e.KtG(c.goToProjectRepo(i.projectRepo))}),e.TgZ(1,"h5"),e._uU(2),e.qZA(),e.TgZ(3,"p",8),e._uU(4),e.qZA()()}if(2&o){const n=r.$implicit;e.xp6(2),e.Oqu(n.projectTitle),e.xp6(2),e.Oqu(n.projectDescription)}}function ce(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,re,5,2,"div",6),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.userProjects)}}let ae=(()=>{class o{constructor(n,t){this.route=n,this.matDialog=t,this.userProjects=[]}ngOnInit(){}goToProjectRepo(n){"https://"===n.substring(0,8)||(n="https://"+n),window.open(n,"_blank")}onSubmitProject(){this.matDialog.open(te,{data:{userID:this.route.snapshot.paramMap.get("uid")}})}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(g.gz),e.Y36(m.uw))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-projects"]],inputs:{userName:"userName",showSubmissionForm:"showSubmissionForm",showSubmissionButton:"showSubmissionButton",userProjects:"userProjects"},decls:9,vars:4,consts:[[1,"container-md","d-flex","justify-content-center","projects"],[1,"projects-card"],[1,"container-fluid","d-flex","justify-content-between"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["class","user-project",3,"click",4,"ngFor","ngForOf"],[1,"user-project",3,"click"],[1,"user-project-description"]],template:function(t,s){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Projects"),e.qZA(),e.YNc(5,se,2,0,"button",3),e.qZA(),e.YNc(6,oe,2,0,"p",4),e.YNc(7,ie,2,1,"p",4),e.YNc(8,ce,2,1,"div",4),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngIf",s.showSubmissionButton&&s.showSubmissionButton),e.xp6(1),e.Q6J("ngIf",0===s.userProjects.length&&s.showSubmissionForm),e.xp6(1),e.Q6J("ngIf",0===s.userProjects.length&&!s.showSubmissionForm),e.xp6(1),e.Q6J("ngIf",0!==s.userProjects.length))},dependencies:[u.sg,u.O5],styles:[".projects[_ngcontent-%COMP%]{margin-top:25px}.projects-card[_ngcontent-%COMP%]{width:100%;background-color:#e7e8e9;border-radius:12px;margin:15px;padding:20px}.projects-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2ea2eb}.projects-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#fff;background-color:#2ea2eb;padding:8px 20px;border-radius:12px}.projects-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;text-align:center;color:gray}.projects-card[_ngcontent-%COMP%]   .user-project[_ngcontent-%COMP%]{margin:10px;padding:15px;background-color:#fff;border-radius:12px;cursor:pointer;box-shadow:#00000026 1.95px 1.95px 2.6px}.projects-card[_ngcontent-%COMP%]   .user-project-description[_ngcontent-%COMP%]{margin:10px;color:gray;text-align:start}"]})}return o})();function le(o,r){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-payment-reminder",5),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("user",n.userDoc)}}function ue(o,r){if(1&o&&e._UZ(0,"img",17),2&o){const n=e.oxw(2);e.Q6J("src","https://flagcdn.com/"+(null==n.userDoc||null==n.userDoc.countryCode?null:n.userDoc.countryCode.toLowerCase())+".svg",e.LSH)("alt",n.userDoc.countryCode)("title",n.userDoc.country)}}function de(o,r){1&o&&(e.TgZ(0,"a",18),e._UZ(1,"i",19),e.qZA())}function ge(o,r){1&o&&(e.TgZ(0,"a",20),e._UZ(1,"i",21),e.qZA())}function pe(o,r){if(1&o&&(e.TgZ(0,"section",6)(1,"section",7)(2,"div",8),e._UZ(3,"img",9),e.TgZ(4,"div",10)(5,"div",11)(6,"h3"),e._uU(7),e.qZA(),e.YNc(8,ue,1,3,"img",12),e.qZA(),e.TgZ(9,"p",13),e._uU(10),e.qZA(),e.TgZ(11,"div",14),e.YNc(12,de,2,0,"a",15),e.YNc(13,ge,2,0,"a",16),e.qZA()()()()()),2&o){const n=e.oxw();e.xp6(3),e.Q6J("src",n.userDoc.photoURL,e.LSH),e.xp6(4),e.hij(" ",n.userDoc.displayName," "),e.xp6(1),e.Q6J("ngIf",n.userDoc.countryCode),e.xp6(2),e.Oqu(n.userDoc.bio),e.xp6(2),e.Q6J("ngIf",n.userDoc.linkedIn),e.xp6(1),e.Q6J("ngIf",n.userDoc.gitHub)}}function fe(o,r){if(1&o&&e._UZ(0,"app-user-courses",22),2&o){const n=e.oxw();e.Q6J("userDoc",n.userDoc)}}function me(o,r){1&o&&e._UZ(0,"app-sessions")}let x=(()=>{class o{constructor(n,t,s,i){this.route=n,this.titleService=t,this.authService=s,this.usersService=i,this.userDoc={},this.userPaid=!0,this.isActiveUserProfile=!1}ngOnInit(){this.usersServiceSub=this.usersService.getUserProjects(this.route.snapshot.paramMap.get("uid")).subscribe(n=>{this.userProjects=n}),this.route.paramMap.subscribe(n=>{this.authServiceSub=this.authService.user.subscribe(t=>{n.get("uid")===t.uid&&(this.isActiveUserProfile=!0)})}),this.route.data.subscribe(n=>{this.userDoc=n.userData,console.log(this.userDoc),this.userPaid=this.userDoc.paid,this.titleService.setTitle(this.userDoc.displayName)})}ngOnDestroy(){this.authServiceSub.unsubscribe(),this.usersServiceSub.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(g.gz),e.Y36(k.Dx),e.Y36(l.e8),e.Y36(l.fz))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:6,vars:11,consts:[[4,"ngIf"],["class","profile",4,"ngIf"],[3,"streakDays","currentStreak","maxStreak"],[3,"userDoc",4,"ngIf"],[3,"showSubmissionForm","showSubmissionButton","userName","userProjects"],[3,"user"],[1,"profile"],[1,"d-flex","justify-content-center","align-items-center","profile-header"],[1,"d-flex","flex-column","flex-sm-row","justify-content-center","align-items-center",2,"min-height","200px"],["alt","",1,"user-avatar",3,"src"],[1,"d-flex","flex-column","align-items-center","align-items-sm-start","user-info"],[1,"d-flex","align-items-center",2,"gap","10px"],[3,"src","alt","title",4,"ngIf"],[1,"user-info-bio"],[1,"d-flex","user-info-social"],["href","","class","linkedIn",4,"ngIf"],["href","","class","gitHub",4,"ngIf"],[3,"src","alt","title"],["href","",1,"linkedIn"],[1,"fa-brands","fa-linkedin"],["href","",1,"gitHub"],[1,"fa-brands","fa-github"],[3,"userDoc"]],template:function(t,s){1&t&&(e.YNc(0,le,2,1,"div",0),e.YNc(1,pe,14,6,"section",1),e._UZ(2,"app-streak",2),e.YNc(3,fe,1,1,"app-user-courses",3),e.YNc(4,me,1,0,"app-sessions",0),e._UZ(5,"app-projects",4)),2&t&&(e.Q6J("ngIf",!s.userPaid),e.xp6(1),e.Q6J("ngIf",void 0!==s.userDoc.photoURL),e.xp6(1),e.Q6J("streakDays",s.userDoc.streakDays)("currentStreak",s.userDoc.currentStreak)("maxStreak",s.userDoc.maxStreak),e.xp6(1),e.Q6J("ngIf",s.isActiveUserProfile),e.xp6(1),e.Q6J("ngIf",s.isActiveUserProfile),e.xp6(1),e.Q6J("showSubmissionForm",s.isActiveUserProfile)("showSubmissionButton",s.userDoc.paid)("userName",s.userDoc.displayName.split(" ")[0])("userProjects",s.userProjects))},dependencies:[u.O5,Z,j,H,V,ae],styles:[".profile[_ngcontent-%COMP%]{width:100%}.profile-header[_ngcontent-%COMP%]{width:100%;min-height:40vh;background-repeat:no-repeat;background-image:url(CO_profile_cover1.615ad00e573cd9f1.svg);background-size:cover}.profile-header[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{border:2px solid white;max-width:128px;max-height:128px;margin:30px;border-radius:50%}.profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{width:300px}.profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:25px}.profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;width:20px;object-fit:contain}.profile-header[_ngcontent-%COMP%]   .user-info-bio[_ngcontent-%COMP%]{font-size:14px;color:#adb6e7;margin:0}.profile-header[_ngcontent-%COMP%]   .user-info-social[_ngcontent-%COMP%]{gap:10px}.profile-header[_ngcontent-%COMP%]   .user-info-social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:14px;color:#adb6e7}.profile-header[_ngcontent-%COMP%]   .user-info-social[_ngcontent-%COMP%]   .linkedIn[_ngcontent-%COMP%]:hover{color:#0077b5}.profile-header[_ngcontent-%COMP%]   .user-info-social[_ngcontent-%COMP%]   .gitHub[_ngcontent-%COMP%]:hover{color:#24292e}"]})}return o})();var Ce=a(22096),_e=a(37398);const y=(o,r)=>{const n=(0,e.f3M)(l.e8),t=(0,e.f3M)(l.Id),s=(0,e.f3M)(g.F0);return null==o.paramMap.get("uid")?(n.user.subscribe(i=>{s.navigate(["profile",i.uid])}),(0,Ce.of)({})):t.getSingleData("users",o.paramMap.get("uid")).pipe((0,_e.U)(i=>i.exists?{id:i.id,...i.data()}:(s.navigate(["not-found"]),{})))},he=[{path:"",component:x,resolve:{userData:y}},{path:":uid",resolve:{userData:y,courses:(o,r)=>(0,e.f3M)(l.No).getAllCourses()},component:x}];let Pe=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#n=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(he),g.Bz]})}return o})();var be=a(77459);let Me=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#n=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[u.ez,Pe,be.m]})}return o})()}}]);